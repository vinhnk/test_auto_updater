<div class="booking-management">
    <form nz-form [formGroup]="searchForm" class="search-form">
      <div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24 }">
        <div nz-col [nzXs]="24" [nzSm]="24" [nzMd]="8">
          <nz-form-item>
            <nz-form-label>Điểm đi</nz-form-label>
            <nz-form-control>
              <input
                nz-input
                formControlName="selectedDeparture"
                placeholder="Nhập điểm đi"
              />
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzXs]="24" [nzSm]="24" [nzMd]="8">
          <nz-form-item>
            <nz-form-label>Điểm đến</nz-form-label>
            <nz-form-control>
              <input
                nz-input
                formControlName="selectedDestination"
                placeholder="Nhập điểm đến"
              />
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzXs]="24" [nzSm]="24" [nzMd]="8" class="button-group">
          <button nz-button [nzType]="'primary'" (click)="search()">
            <i nz-icon nzType="search"></i>Tìm kiếm
          </button>
          <button nz-button (click)="reset()">
            <i nz-icon nzType="clear"></i>Reset
          </button>
          <!-- <button nz-button [nzType]="'primary'" (click)="showModal()">
            <i nz-icon nzType="plus"></i>Thêm mới
          </button> -->
        </div>
      </div>
    </form>
    <div class="table-container">
      <nz-table
        #basicTable
        [nzData]="bookings"
        [nzTotal]="total"
        [nzPageSize]="pageSize"
        [nzPageIndex]="pageIndex"
        [nzLoading]="loading"
        [nzShowSizeChanger]="true"
        [nzShowTotal]="rangeTemplate"
        (nzPageIndexChange)="onPageIndexChange($event)"
        (nzPageSizeChange)="onPageSizeChange($event)"
        [nzFrontPagination]="false"
        [nzShowPagination]="true"
        [nzScroll]="{ x: '800px' }"
      >
        <thead>
          <tr>
            <!-- <th>Số hành khách</th> -->
            <th>Điểm đi</th>
            <th>Điểm đến</th>
            <th>Chi nhánh</th>
            <th>Tuyến</th>
            <th>Điểm xuất phát</th>
            <th>Điểm cuối</th>
            <th>Ngày đi</th>
            <th>Giờ đi</th>
            <th>Giờ đến</th>
            
            <th>Giá vé</th>
            <th>Giá gốc</th>
            <th>Giảm giá</th>
            <th>Trạng thái</th>
            <th>Thao tác</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let data of basicTable.data; trackBy: trackByFn">
            <!-- <td>{{ data.passengerCount }}</td> -->
            <td>{{ data.selectedDeparture }}</td>
            <td>{{ data.selectedDestination }}</td>
            <td>{{ data.branchName }}</td>
            <td>{{ data.routeName }}</td>
            <td>{{ data.departurePoint }}</td>
            <td>{{ data.destinationPoint }}</td>
            <td>{{ data.selectedDate | date : "dd/MM/yyyy" }}</td>
            <td>{{ data.departureTime }}</td>
            <td>{{ data.arrivalTime }}</td>

            <td>{{ data.price | number }}</td>
            <td>{{ data.originalPrice | number }}</td>
            <td>{{ data.hasDiscount ? 'Có' : 'Không' }}</td>
            <td>{{ getStatusText(data.status) }}</td>
            <td>
              <a (click)="showModal(data)">Xem chi tiết</a> |
              <a nz-button nzType="link" nzDanger (click)="delete(data.id!)">Xóa</a>
            </td>
          </tr>
        </tbody>
      </nz-table>
    </div>
  </div>
  
  <ng-template #rangeTemplate let-range="range" let-total>
      {{ range[0] }}-{{ range[1] }} của {{ total }} mục
  </ng-template>
  